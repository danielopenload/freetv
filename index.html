<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Zapping TV - Ventana</title>
<style>
body { margin:0; background:black; font-family:Arial; overflow:hidden; }
#player { width:100vw; height:100vh; position:relative; outline:none; }
.overlay {
  position:absolute; top:0; left:0; width:100%; height:100%;
  z-index:10; background:transparent;
}
.barra {
  position: fixed;
  bottom: 0;
  width: 40%;               /* ancho de la barra */
  left: 50%;                /* mover al centro horizontal */
   border-radius:10px;
  transform: translateX(-50%); /* ajustar para que quede perfectamente centrada */
  display: flex;
  justify-content: center;
  padding: 2px 5px;
  background: rgba(0,0,0,0.3);
  overflow: hidden; 
}
.canal { 
    flex:0 0 auto;
    margin:0 5px; 
    padding:1px 5px; 
    color: yellow;
    font-size:11px;
  font-weight:bold;
   opacity:0.6; 
    border-radius:3px; 
    transition:0.2s; 
    white-space:nowrap;
    text-align:center;}
  
.canal.activo { opacity:1; font-weight:bold; color:red; background:rgba(255,255,255);}
iframe, video { width:100%; height:100%; object-fit:cover; }
</style>
</head>
<body>

<div id="player"></div>
<div class="barra" id="barra"></div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
// Lista de canales
const canales = [
    { title: "CANAL 7", type: "m3u8", url: "https://stream.arcast.com.ar/c7nq/ngrp:c7nq_all/playlist.m3u8" },
    { title: "TV PUBLICA", type: "youtube", url: "LwYRDMkKeXY" },
    { title: "A24", type: "youtube", url: "ArKbAx1K-2U" },
    { title: "CANAL 13", type: "m3u8", url: "https://live-01-02-eltrece.vodgc.net:443/eltrecetv/tracks-v3a1/mono.m3u8" },
    { title: "TELEFE", type: "m3u8", url: "https://telefeviacom1.akamaized.net/hls/live/2037987/viacomINT/TOK/master-wild1.m3u8" },
    { title: "TELEFE2", type: "youtube", url: "xo8GkZXtNV0" },
    { title: "LN+", type: "youtube", url: "5f__Ls4_VYQ" },
    { title: "TN", type: "youtube", url: "cb12KmMMDJA" },
    { title: "C5N", type: "youtube", url: "jTDk5CswBVk" },
    { title: "CRONICA", type: "youtube", url: "avly0uwZzOE" },
    { title: "CANAL26", type: "youtube", url: "BTaSHvWJW5A" },
    { title: "TELEMAX", type: "m3u8", url: "https://stream-gtlc.telecentro.net.ar/hls/telemaxhls/0/playlist.m3u8" },
    { title: "TELESUR", type: "youtube", url: "m3soaHQ7aLY" },
    { title: "DW", type: "m3u8", url: "https://dwamdstream104.akamaized.net/hls/live/2015530/dwstream104/master.m3u8" },
    { title: "RT ESPAÑOL", type: "m3u8", url: "https://rt-esp.rttv.com/dvr/rtesp/playlist_4500Kb.m3u8" },
    { title: "FRANCE 24", type: "youtube", url: "Y-IlMeCCtIg" },
    { title: "EURONEWS", type: "youtube", url: "O9mOtdZ-nSk" },
    { title: "CHV", type: "youtube", url: "H3AFMMYG_tU" },
    { title: "24 CH", type: "youtube", url: "h3Jn8f-YKRk" },
    { title: "T13", type: "youtube", url: "R_V7FhsCPwM" },
    { title: "MEGA", type: "youtube", url: "yG-VxvOVkTQ" },
    { title: "CGTN", type: "youtube", url: "lPbE2DSWLoE" },
    { title: "TELEMUNDO", type: "youtube", url: "sfQW4Fp0h88" },
    { title: "UNIVISION", type: "youtube", url: "V4C7VNfRATA" },
    { title: "NTN24", type: "youtube", url: "PTqeoIrXfWg" },
    { title: "F10", type: "m3u8", url: "https://tv2.bitstreaming.net:3235/multi_live/play_720.m3u8" },
    { title: "RCN", type: "youtube", url: "-8ItzGB4j7o" },
  { title: "CARACOL", type: "youtube", url: "DW0Q4NBO51w" },
  { title: "RED", type: "m3u8", url: "https://inforedvos.lcdn.claro.net.co/Content/HLS_HLS_DIR/Live/channel(REDMASHDWEB)/04.m3u8" },
    { title: "TVPE", type: "m3u8", url: "https://cdnhd.iblups.com/hls/ee2450c81e554f4cae0e6292106993c2.m3u8" },
    { title: "TVPE NEWS", type: "m3u8", url: "https://cdnhd.iblups.com/hls/902c1a0395264f269f1160efa00660e4.m3u8" },
    { title: "LATINA", type: "youtube", url: "DhWVrsc0RuQ" },
    { title: "GLOBOVISION", type: "youtube", url: "uFduAcDox-0" },
    { title: "RTVE", type: "youtube", url: "7_srED6k0bE" },
    { title: "HISPANTV", type: "m3u8", url: "https://live.presstv.ir/hls/hispantv_5_482/index.m3u8" },
    { title: "HONDURAS", type: "m3u8", url: "https://stream.radiosmundiales.com:19360/globotvhonduras/720p.m3u8" },
    { title: "OROMAR TV", type: "m3u8", url: "https://stream.oromar.tv/hls/oromartv_hi/index.m3u8" },
    { title: "EL GARAGE", type: "m3u8", url: "https://stream1.sersat.com/hls/garagetv.m3u8" }
];

const barraDiv = document.getElementById("barra");
const playerDiv = document.getElementById("player");
let indice = 0;
const ventana = 5;
let inicio = 0;
let hlsInstance = null;

// Crear barra
canales.forEach(ch=>{
  const div = document.createElement("div");
  div.className="canal";
  div.textContent=ch.title;
  barraDiv.appendChild(div);
});
const barra = barraDiv.children;

function actualizarVentana(){
  inicio = indice - Math.floor(ventana/2);
  if(inicio < 0) inicio = 0;
  if(inicio > canales.length - ventana) inicio = canales.length - ventana;

  for(let i=0;i<barra.length;i++){
    barra[i].style.display=(i>=inicio && i<inicio+ventana)?"block":"none";
    barra[i].classList.toggle("activo", i===indice);
  }
}

// Función para limpiar player y liberar memoria
function limpiarPlayer(){
  // Detener HLS si existe
  if(hlsInstance){
    hlsInstance.destroy();
    hlsInstance = null;
  }
  // Eliminar todo del player
  playerDiv.innerHTML = "";
}

// Cargar canal
function cargarCanal(ch){
  limpiarPlayer();

  if(ch.type==="youtube"){
    const iframe=document.createElement("iframe");
    iframe.src=`https://www.youtube.com/embed/${ch.url}?autoplay=1&mute=1`;
    iframe.allow="autoplay; encrypted-media";
    iframe.frameBorder=0;
    iframe.allowFullscreen=true;
    playerDiv.appendChild(iframe);

    // Overlay para mantener foco en la barra
    const overlay=document.createElement("div");
    overlay.className="overlay";
    playerDiv.appendChild(overlay);
  } else if(ch.type==="m3u8"){
    const video=document.createElement("video");
    video.autoplay=true; video.controls=false; video.muted=false; video.playsInline=true;
    playerDiv.appendChild(video);

    if(Hls.isSupported()){
      hlsInstance = new Hls();
      hlsInstance.loadSource(ch.url);
      hlsInstance.attachMedia(video);
    } else if(video.canPlayType("application/vnd.apple.mpegurl")){
      video.src=ch.url;
    }

    video.play();
  }
}

// Inicializar
cargarCanal(canales[indice]);
actualizarVentana();

// Navegación
document.addEventListener("keydown", e=>{
  switch(e.key){
    case "ArrowRight":
      indice=(indice+1)%canales.length; 
      actualizarVentana(); 
      cargarCanal(canales[indice]); // carga automática
      break;
    case "ArrowLeft":
      indice=(indice-1+canales.length)%canales.length; 
      actualizarVentana(); 
      cargarCanal(canales[indice]); // carga automática
      break;
  }
});

// Barra clickeable
for(let i=0;i<barra.length;i++){
  barra[i].addEventListener("click", ()=>{
    indice = i;
    actualizarVentana();
    cargarCanal(canales[indice]);
  });
}
</script>

</body>
</html>

