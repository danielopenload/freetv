<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Zapping TV - Ventana</title>
<style>

body { margin:0; background:black; font-family:Arial; overflow:hidden; }
#player { width:100vw; height:100vh; position:relative; outline:none; }
.overlay {
  position:absolute; top:0; left:0; width:100%; height:100%;
  z-index:10; background:transparent;
}
.barra {
  position: fixed;
  bottom: 0;
  width: 50%;
  left: 50%;
  border-radius:10px;
  transform: translateX(-50%);
  display: flex;
  justify-content: center;
  padding: 2px 20px;
  background: rgba(0,0,0,0.0);
  overflow: hidden; 
}
.canal { 
  flex:0 0 auto;
  margin:0 5px; 
  padding:1px 5px; 
  color: yellow;
  font-size:11px;
  font-weight:bold;
  opacity:0.6; 
  border-radius:3px;
  border: 1px solid white;
  transition:0.2s; 
  white-space:nowrap;
  text-align:center;
  background: rgba(0,0,0,0.5);
}
.canal.activo { 
  opacity:1; 
  font-weight:bold; 
  color:red;
  border: 1px solid red;
  background: white;
  box-shadow: 2px 2px 6px black;
  
}
iframe, video { 
  width:100%; 
  height:100%; 
  object-fit:cover;
}
.canal.zoom {
 transform: scale(1.1);
  transition: transform 0.2s;
  background: red;
  color: white;
}

/* === Hora arriba derecha === */
#hora {
  position: fixed;
  top: 5px;
  right: 10px;
  font-size: 16px;
  font-weight: bold;
  color: lime;
  border: 1px solid rgba(255,255,255,0.5);
  background: rgba(0,0,0,0.4);
  padding: 3px 6px;
  border-radius: 6px;
  z-index: 20;
  font-family: monospace;
  text-shadow: 2px 2px 2px black;
  box-shadow: 2px 2px 6px black;
}

/* === Fecha arriba izquierda === */
#fecha {
  position: fixed;
  top: 5px;
  left: 10px;
  font-size: 16px;
  font-weight: bold;
  color: Cyan;
  border: 1px solid rgba(255,255,255,0.5);
  background: rgba(0,0,0,0.4);
  padding: 3px 6px;
  border-radius: 6px;
  z-index: 20;
  font-family: monospace;
  text-shadow: 2px 2px 2px black;
  box-shadow: 2px 2px 6px black;
}
</style>
</head>
<body>

<div id="player"></div>
<div class="barra" id="barra"></div>
<div id="hora"></div>   <!-- Hora arriba derecha -->
<div id="fecha"></div>  <!-- Fecha arriba izquierda -->

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
// === Fecha y Hora ===
function actualizarFechaHora(){
  const ahora = new Date();

  // Hora
  const horas = String(ahora.getHours()).padStart(2,"0");
  const minutos = String(ahora.getMinutes()).padStart(2,"0");
  const segundos = String(ahora.getSeconds()).padStart(2,"0");
  document.getElementById("hora").textContent = `${horas}:${minutos}:${segundos}`;

// Fecha
const opcionesFecha = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
let fechaStr = ahora.toLocaleDateString('es-ES', opcionesFecha);

// Quitar la coma que aparece después del día de la semana
fechaStr = fechaStr.replace(",", "");

// Poner la primera letra en mayúscula
fechaStr = fechaStr.toUpperCase();
document.getElementById("fecha").textContent = fechaStr;

}
setInterval(actualizarFechaHora,1000);
actualizarFechaHora();

// === Lista de canales ===
const canales = [
    { title: "CANAL 7", type: "m3u8", url: "https://stream.arcast.com.ar/c7nq/ngrp:c7nq_all/playlist.m3u8" },
    { title: "TV PUBLICA", type: "youtube", url: "OhiyOCZ8EeY" },
    { title: "A24", type: "youtube", url: "ArKbAx1K-2U" },
    { title: "CANAL 13", type: "m3u8", url: "https://live-01-02-eltrece.vodgc.net:443/eltrecetv/tracks-v3a1/mono.m3u8" },
    { title: "TELEFE", type: "m3u8", url: "https://telefeviacom1.akamaized.net/hls/live/2037987/viacomINT/TOK/master-wild1.m3u8" },
    { title: "TELEFE2", type: "youtube", url: "xo8GkZXtNV0" },
    { title: "LN+", type: "youtube", url: "5f__Ls4_VYQ" },
    { title: "TN", type: "youtube", url: "cb12KmMMDJA" },
    { title: "C5N", type: "youtube", url: "jTDk5CswBVk" },
    { title: "CRONICA", type: "youtube", url: "avly0uwZzOE" },
    { title: "CANAL26", type: "youtube", url: "BTaSHvWJW5A" },
    { title: "IP", type: "youtube", url: "MJQ-KqL8SX4" },
    { title: "TELEMAX", type: "m3u8", url: "https://stream-gtlc.telecentro.net.ar/hls/telemaxhls/0/playlist.m3u8" },
    { title: "TELESUR", type: "youtube", url: "m3soaHQ7aLY" },
    { title: "DW", type: "youtube", url: "g3vbKsbx87I" },
    { title: "RT ESPAÑOL", type: "m3u8", url: "https://rt-esp.rttv.com/dvr/rtesp/playlist_4500Kb.m3u8" },
    { title: "FRANCE 24", type: "youtube", url: "Y-IlMeCCtIg" },
    { title: "EURONEWS", type: "youtube", url: "O9mOtdZ-nSk" },
    { title: "CHV", type: "youtube", url: "H3AFMMYG_tU" },
    { title: "24 CH", type: "youtube", url: "h3Jn8f-YKRk" },
    { title: "T13", type: "youtube", url: "R_V7FhsCPwM" },
    { title: "MEGA", type: "youtube", url: "HfCH3zezHgE" },
    { title: "CGTN", type: "youtube", url: "lPbE2DSWLoE" },
    { title: "TELEMUNDO", type: "youtube", url: "sfQW4Fp0h88" },
    { title: "UNIVISION", type: "youtube", url: "V4C7VNfRATA" },
    { title: "NTN24", type: "youtube", url: "PTqeoIrXfWg" },
    { title: "F10", type: "m3u8", url: "https://tv2.bitstreaming.net:3235/multi_live/play_720.m3u8" },
    { title: "RCN", type: "youtube", url: "-8ItzGB4j7o" },
    { title: "CARACOL", type: "youtube", url: "DW0Q4NBO51w" },
    { title: "RED", type: "m3u8", url: "https://inforedvos.lcdn.claro.net.co/Content/HLS_HLS_DIR/Live/channel(REDMASHDWEB)/04.m3u8" },
    { title: "TVPE", type: "m3u8", url: "https://cdnhd.iblups.com/hls/ee2450c81e554f4cae0e6292106993c2.m3u8" },
    { title: "TVPE NEWS", type: "m3u8", url: "https://cdnhd.iblups.com/hls/902c1a0395264f269f1160efa00660e4.m3u8" },
    { title: "LATINA", type: "youtube", url: "DhWVrsc0RuQ" },
    { title: "GLOBOVISION", type: "youtube", url: "uFduAcDox-0" },
    { title: "RTVE", type: "youtube", url: "7_srED6k0bE" },
    { title: "HISPANTV", type: "m3u8", url: "https://live.presstv.ir/hls/hispantv_5_482/index.m3u8" },
    { title: "HONDURAS", type: "m3u8", url: "https://stream.radiosmundiales.com:19360/globotvhonduras/720p.m3u8" },
    { title: "OROMAR TV", type: "m3u8", url: "https://stream.oromar.tv/hls/oromartv_hi/index.m3u8" },
    { title: "GAMANOTICIAS", type: "m3u8", url: "https://stream.esradioecuador.com/hls/stream.m3u8" },
    { title: "EL GARAGE", type: "m3u8", url: "https://stream1.sersat.com/hls/garagetv.m3u8" }
];


const barraDiv = document.getElementById("barra");
const playerDiv = document.getElementById("player");
let indice = 0;
const ventana = 5;
let inicio = 0;
let currentIframe = null;
let currentVideo = null;
let currentHls = null;

canales.forEach(ch=>{
  const div = document.createElement("div");
  div.className="canal";
  div.textContent=ch.title;
  barraDiv.appendChild(div);
});
const barra = barraDiv.children;

function actualizarVentana(){
  inicio = indice - Math.floor(ventana/2);
  if(inicio < 0) inicio = 0;
  if(inicio > canales.length - ventana) inicio = canales.length - ventana;
  for(let i=0;i<barra.length;i++){
    barra[i].style.display=(i>=inicio && i<inicio+ventana)?"block":"none";
    barra[i].classList.toggle("activo", i===indice);
  }
}

function limpiarPlayer(){
  if(currentHls){ 
    currentHls.destroy(); 
    currentHls = null; 
  }
  
  if(currentVideo){ 
    try {
      currentVideo.pause();
      currentVideo.muted = true;               
      currentVideo.removeAttribute("src");     
      currentVideo.load();                     
    } catch(e){}
    currentVideo.remove(); 
    currentVideo = null; 
  }

  if(currentIframe){ 
    try {
      currentIframe.src = "about:blank";       
    } catch(e){}
    currentIframe.remove(); 
    currentIframe = null; 
  }

  playerDiv.innerHTML = "";
}

function cargarCanal(ch){
  limpiarPlayer();
  barra[indice].classList.add("zoom");
  setTimeout(()=>{ barra[indice].classList.remove("zoom"); },200);
  if(ch.type==="youtube"){
    const iframe=document.createElement("iframe");
    iframe.src=`https://www.youtube.com/embed/${ch.url}?autoplay=1&mute=0`;
    iframe.allow="autoplay; encrypted-media";
    iframe.frameBorder=0;
    iframe.allowFullscreen=true;
    playerDiv.appendChild(iframe);
    currentIframe=iframe;
    const overlay=document.createElement("div");
    overlay.className="overlay";
    playerDiv.appendChild(overlay);
  } else if(ch.type==="m3u8"){
    const video=document.createElement("video");
    video.autoplay=true; video.controls=false; video.muted=false; video.playsInline=true;
    playerDiv.appendChild(video);
    currentVideo=video;
    if(Hls.isSupported()){
      const hls=new Hls();
      hls.loadSource(ch.url);
      hls.attachMedia(video);
      currentHls=hls;
    } else if(video.canPlayType("application/vnd.apple.mpegurl")){
      video.src=ch.url;
    }
    video.play();
  }
}

cargarCanal(canales[indice]);
actualizarVentana();

document.addEventListener("keydown", e=>{
  switch(e.key){
    case "ArrowRight": indice=(indice+1)%canales.length; actualizarVentana(); break;
    case "ArrowLeft": indice=(indice-1+canales.length)%canales.length; actualizarVentana(); break;
    case "Enter": case "OK": cargarCanal(canales[indice]); break;
  }
});
</script>
</body>
</html>





