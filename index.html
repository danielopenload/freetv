<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Zapping TV - Ventana</title>
<style>
body { margin:0; background:black; font-family:Arial; overflow:hidden; }
#player { width:100vw; height:100vh; outline:none; }
.barra { position:fixed; bottom:0; width:100%; display:flex; justify-content:center;
        padding:4px 5px; background:rgba(0,0,0,0.7); overflow:hidden; }
.canal { flex:0 0 auto; margin:0 5px; padding:3px 8px; color:white; font-size:16px;
        opacity:0.6; border-radius:5px; transition:0.2s; white-space:nowrap; text-align:center;}
.canal.activo { opacity:1; font-weight:bold; color:yellow; background:rgba(255,255,0,0.2);}
iframe, video { width:100%; height:100%; object-fit:cover; }
</style>
</head>
<body>

<div id="player"></div>
<div class="barra" id="barra"></div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
// Lista de canales de ejemplo
const canales = [
  { title:"CANAL 7", type:"m3u8", url:"https://stream.arcast.com.ar/c7nq/ngrp:c7nq_all/playlist.m3u8" },
  { title:"A24", type:"youtube", url:"ArKbAx1K-2U" },
  { title:"CANAL 13", type:"m3u8", url:"https://live-01-02-eltrece.vodgc.net:443/eltrecetv/tracks-v3a1/mono.m3u8" },
  { title:"TELEFE1", type:"m3u8", url:"https://telefeviacom1.akamaized.net/hls/live/2037987/viacomINT/TOK/master-wild1.m3u8" },
  { title:"TELEFE", type:"youtube", url:"xo8GkZXtNV0" },
  { title:"LN+", type:"youtube", url:"5f__Ls4_VYQ" },
      { title: "EURONEWS", type: "youtube", url: "O9mOtdZ-nSk" },
    { title: "CHV", type: "youtube", url: "H3AFMMYG_tU" },
    { title: "CGTN", type: "youtube", url: "lPbE2DSWLoE" },
    { title: "TELEMUNDO", type: "youtube", url: "0zMi6kHo19o" },
    { title: "UNIVISION", type: "youtube", url: "V4C7VNfRATA" },
    { title: "NTN24", type: "youtube", url: "PTqeoIrXfWg" },
    { title: "F10", type: "m3u8", url: "https://tv2.bitstreaming.net:3235/multi_live/play_720.m3u8" },
    { title: "RCN", type: "youtube", url: "-8ItzGB4j7o" },
    { title: "LATINA", type: "youtube", url: "DhWVrsc0RuQ" },
    { title: "RTVE", type: "youtube", url: "7_srED6k0bE" },
    { title: "TV PUBLICA", type: "youtube", url: "pGlhgOZMZPU" },
  { title:"TN", type:"youtube", url:"cb12KmMMDJA" }
];

const barraDiv = document.getElementById("barra");
const playerDiv = document.getElementById("player");
let indice = 0;

// Crear elementos de la barra
canales.forEach(ch=>{
  const div = document.createElement("div");
  div.className = "canal";
  div.textContent = ch.title;
  barraDiv.appendChild(div);
});
const barra = barraDiv.children;

const ventana = 6; // cantidad de canales visibles en la ventana
let inicio = 0;     // primer canal de la ventana

function actualizarVentana(){
  // Ajustar el inicio para que el activo quede en el centro de la ventana
  inicio = indice - Math.floor(ventana/2);
  if(inicio < 0) inicio = 0;
  if(inicio > canales.length - ventana) inicio = canales.length - ventana;

  for(let i=0;i<barra.length;i++){
    barra[i].style.display = (i>=inicio && i<inicio+ventana) ? "block" : "none";
    barra[i].classList.toggle("activo", i===indice);
  }
}

// Cargar canal en el reproductor
function cargarCanal(ch){
  playerDiv.innerHTML="";
  if(ch.type==="youtube"){
    const iframe = document.createElement("iframe");
    iframe.src = `https://www.youtube.com/embed/${ch.url}?autoplay=1&mute=0`;
    iframe.allow="autoplay; encrypted-media";
    iframe.frameBorder = 0;
    iframe.allowFullscreen = true;
    playerDiv.appendChild(iframe);
  } else if(ch.type==="m3u8"){
    const video = document.createElement("video");
    video.autoplay = true; video.controls = false; video.muted = false; video.playsInline = true;
    playerDiv.appendChild(video);
    if(Hls.isSupported()){
      const hls = new Hls();
      hls.loadSource(ch.url);
      hls.attachMedia(video);
    } else if(video.canPlayType("application/vnd.apple.mpegurl")){ video.src = ch.url; }
    video.play();
  }
}

// Inicializar
cargarCanal(canales[indice]);
actualizarVentana();

// NavegaciÃ³n
document.addEventListener("keydown", e=>{
  switch(e.key){
    case "ArrowRight": indice = (indice+1)%canales.length; actualizarVentana(); break;
    case "ArrowLeft": indice = (indice-1+canales.length)%canales.length; actualizarVentana(); break;
    case "Enter": case "OK": cargarCanal(canales[indice]); break;
  }
});
</script>
</body>
</html>
